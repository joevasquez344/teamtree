"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{80040:function(e,s,r){r.d(s,{Z:function(){return L}});var t=r(85893),l=r(67294),i=e=>{let{color:s}=e;return(0,t.jsx)("div",{className:"rounded-full w-10 h-10 flex-shrink-0 flex items-center justify-center bg-".concat(s,"-500"),children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})})})},n=r(354);r(30381);var a=r(11163),o=e=>{let{chatName:s}=e;return(0,t.jsx)("div",{className:"text-white h-screen w-full relative p-5",children:(0,t.jsxs)("div",{className:"absolute bottom-64",children:[(0,t.jsx)("div",{className:"text-3xl font-bold mb-4",children:s}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{children:"This is the beginning of chat history with"})," ",(0,t.jsx)("div",{className:"font-semibold text-green-500",children:s})]})]})})},d=r(50549);let c=[1,2,3,4,5,6];var u=()=>(0,t.jsx)("div",{className:"px-7 pt-3",children:c.map(e=>(0,t.jsxs)("div",{className:"flex space-x-3 mb-7",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full",children:(0,t.jsx)(d.Z,{className:"w-full h-full rounded-full",baseColor:"rgb(31 41 55)",count:1,width:"100%",height:"100%",borderRadius:"500px",highlightColor:"rgb(55 65 81)",enableAnimation:!0,direction:"rtl",duration:1})}),(0,t.jsxs)("div",{className:"w-1/2",children:[(0,t.jsx)(d.Z,{className:"mb-3",baseColor:"rgb(31 41 55)",count:1,width:"100px",height:"20px",highlightColor:"rgb(55 65 81)",enableAnimation:!0,direction:"rtl",duration:1}),(0,t.jsx)(d.Z,{baseColor:"rgb(31 41 55)",count:1,height:"150px",highlightColor:"rgb(55 65 81)",enableAnimation:!0,direction:"rtl",duration:1})]})]},e))}),x=()=>(0,t.jsxs)("div",{className:"absolute w-12 top-3 pr-2 flex flex-col items-end  mb-3",children:[(0,t.jsx)("div",{className:"h-2.5 w-2.5 bg-green-500 mb-1 rounded-full"}),(0,t.jsx)("div",{className:"h-1.5 w-1.5 bg-green-400 mb-2 mr-4 rounded-full"}),(0,t.jsx)("div",{className:"h-1 w-1 bg-green-300 mx-auto rounded-full"})]}),h=e=>{let{message:s}=e;return(0,t.jsx)("div",{className:"inline-flex ml-12 mb-3   bg-gray-700 group-hover:bg-gray-900  transition ease-in-out duration-200 rounded-md px-1 py-2",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"rounded-full w-4 h-4 flex-shrink-0 flex items-center justify-center bg-red-500 mr-2",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})})}),(0,t.jsxs)("div",{className:" text-sm mr-2 text-gray-400",children:["@",s.replyToMessage.user.username]}),(0,t.jsx)("div",{className:"",children:s.replyToMessage.isEdited&&(0,t.jsx)("div",{className:"text-yellow-500 text-sm mr-1",children:"Edited"})}),(0,t.jsx)("div",{className:" text-sm text-gray-200  w-5/6",children:s.replyToText})]})})},m=()=>(0,t.jsx)("div",{className:"inline-flex ml-12 mb-3  px-1 py-2",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"rounded-full w-4 h-4 flex-shrink-0 flex items-center justify-center bg-red-500 mr-2",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})})}),(0,t.jsx)("div",{className:"text-red-500 text-sm mr-1",children:"Message Deleted"})]})}),g=e=>{let{children:s}=e;return(0,t.jsx)("div",{className:"flex items-center relative",children:s})},v=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 text-green-600",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 012.25-2.25h7.5A2.25 2.25 0 0118 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 004.5 9v.878m13.5-3A2.25 2.25 0 0119.5 9v.878m0 0a2.246 2.246 0 00-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0121 12v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6c0-.98.626-1.813 1.5-2.122"})}),j=e=>{let{message:s,input:r,inputRef:l,handleInputChange:i,handleRemoveInputFocus:o}=e,d=(0,a.useRouter)(),{editTeamMessage:c,editGroupMessage:u,editDirectMessage:x}=(0,n.y2)(),h=d.query.teamId,m=d.query.groupId,g=d.query.username,j=async(e,s,r)=>{e.preventDefault(),!h||m||g?h&&m&&!g?u(s,r):x(s,r):await c(s,r),o()};return(0,t.jsxs)("div",{className:"flex flex-col w-full",children:[" ",(null==s?void 0:s.type)==="task"?(0,t.jsxs)("div",{className:" relative flex justify-between bg-gray-800   my-2 w-full text-gray-300 p-3 rounded-md",children:[(0,t.jsx)("input",{ref:ref,onChange:i,placeholder:s.text,value:r,className:"text-gray-300 outline-none bg-transparent w-full"}),(0,t.jsx)("div",{className:"h-7 w-7 absolute -right-3 top-2.5  flex items-center justify-center rounded-full  bg-gray-700 group-hover:bg-gray-800 border-gray-500 transition ease-in-out duration-200",children:(0,t.jsx)(v,{})})]}):(0,t.jsx)("div",{className:" relative flex justify-between bg-gray-800  my-2 w-full text-gray-300 p-3 rounded-md ",children:(0,t.jsx)("form",{onSubmit:e=>j(e,s,r),className:"w-full",children:(0,t.jsx)("input",{value:r,ref:l,onChange:i,placeholder:s.text,className:"text-gray-300 outline-none bg-transparent w-full"})})}),(0,t.jsx)("div",{onClick:o,className:"text-green-500 text-xs cursor-pointer",children:"Cancel"})]})},p=r(55550);let f=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  text-gray-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),w=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 text-gray-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),b=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4  text-gray-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),y=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4  text-gray-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})});var N=e=>{let{message:s,hover:r,reply:l,handleFocusInput:i,handleOpenDeletePrompt:n}=e,{authUser:a}=(0,p.aC)();return s.user.id===a.id?(0,t.jsxs)("div",{className:"".concat(r!==s.id&&"hidden"," flex items-center  rounded-md  absolute -right-3 -top-6  border border-black border-opacity-30 bg-gray-800 shadow-md   transition ease-in-out duration-200"),children:[(0,t.jsx)("div",{onClick:()=>l(s),className:"hover:bg-gray-700 h-6 flex items-center justify-center rounded-tl-md rounded-bl-md px-2 py-4 transition ease-in-out duration-200 cursor-pointer",children:(0,t.jsx)(w,{})}),(0,t.jsx)("div",{onClick:()=>i(s.id,s),className:"hover:bg-gray-700 h-6 flex items-center justify-center  px-2 py-4 transition ease-in-out duration-200 cursor-pointer",children:(0,t.jsx)(b,{})}),(0,t.jsx)("div",{onClick:()=>n(s),className:"hover:bg-gray-700 transition ease-in-out px-1 py-2 duration-200 cursor-pointer rounded-tr-md rounded-br-md",children:(0,t.jsx)(y,{})})]}):(0,t.jsxs)("div",{className:"".concat(r!==s.id&&"hidden"," flex items-center  rounded-md  absolute -right-3 -top-6  border border-black border-opacity-30 bg-gray-800 shadow-md   transition ease-in-out duration-200"),children:[(0,t.jsx)("div",{onClick:()=>l(s),className:"hover:bg-gray-700 h-6 flex items-center justify-center rounded-tl-md rounded-bl-md px-2 py-5 transition ease-in-out duration-200 cursor-pointer",children:(0,t.jsx)(w,{})}),(0,t.jsx)("div",{className:"hover:bg-gray-700 transition ease-in-out px-1 py-2 duration-200 cursor-pointer rounded-tr-md rounded-br-md",children:(0,t.jsx)(f,{})})]})},k=e=>{let{deletePrompt:s,setDeletePrompt:r,messageToDelete:l}=e,i=(0,a.useRouter)(),{deleteTeamMessage:o,deleteGroupMessage:d,deleteDirectMessage:c}=(0,n.y2)(),u=i.query.teamId,x=i.query.groupId,h=i.query.username;return(0,t.jsx)(t.Fragment,{children:s&&(0,t.jsxs)("div",{className:"fixed top-0 right-0 bottom-0 left-0 flex z-40 items-center justify-center",children:[(0,t.jsx)("div",{className:" absolute top-0 right-0 bottom-0 left-0 bg-black opacity-70"}),(0,t.jsx)("div",{className:"z-50 w-[450px] bg-gray-800 shadow-xl rounded-xl py-5 px-7 flex flex-col items-center ",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-white mb-5 h-12 overflow-hidden",children:l.text}),(0,t.jsx)("div",{className:"text-white mb-7",children:"Are you sure you want to delete this message?"}),(0,t.jsxs)("div",{className:"flex items-center justify-evenly w-full",children:[(0,t.jsx)("div",{onClick:()=>{!u||x||h?u&&x&&!h?d(l.id):c(l.id):o(l.id),r(!1)},className:"bg-red-500 text-white font-semibold py-1 px-7 cursor-pointer rounded",children:"Delete"}),(0,t.jsx)("div",{onClick:()=>r(!1),className:"bg-gray-400 text-white font-semibold py-1 px-7 cursor-pointer rounded",children:"Cancel"})]})]})})]})})},C=e=>{var s,r,n;let{message:o,inputEl:d,setInputEl:c,reply:u,handleOpenDeletePrompt:p,inputRef:f}=e,w=(0,a.useRouter)();(0,l.useRef)(null);let[b,y]=(0,l.useState)(-1),[k,C]=(0,l.useState)(""),L=e=>{d!==e&&y(e)};return(0,t.jsxs)("div",{onMouseOver:()=>L(o.id),onMouseLeave:e=>{d!==e&&y(-1)},className:"group hover:bg-gray-900 ".concat((null==o?void 0:o.type)==="task"&&" ","  ").concat(d===o.id&&"bg-gray-900"," transition ease-in-out duration-200 px-5 py-3"),children:[(null===(s=o.replyToMessage)||void 0===s?void 0:s.id)&&o.replyToText?(0,t.jsxs)(g,{children:[(0,t.jsx)(x,{}),(0,t.jsx)(h,{message:o})]}):o.replyToRef&&null===o.replyToMessage&&(0,t.jsxs)(g,{children:[(0,t.jsx)(x,{}),(0,t.jsx)(m,{})]}),(0,t.jsxs)("div",{className:"flex justify-between relative ",children:[(0,t.jsxs)("div",{className:"flex space-x-3 w-full",children:[(0,t.jsx)("div",{className:"cursor-pointer",onClick:()=>w.push("/teams/".concat(w.query.teamId,"/chat/").concat(o.user.username)),children:(0,t.jsx)(i,{color:"blue"})}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center  space-x-1",children:[(0,t.jsx)("div",{className:"font-semibold text-gray-300",children:(0,t.jsx)("div",{children:null==o?void 0:null===(r=o.user)||void 0===r?void 0:r.name})}),(0,t.jsxs)("div",{className:"text-sm text-gray-300",children:["@",null==o?void 0:null===(n=o.user)||void 0===n?void 0:n.username]})]}),(0,t.jsx)("div",{className:"flex space-x-3 cursor-default",children:d===o.id?(0,t.jsx)(j,{message:o,input:k,inputRef:f,handleRemoveInputFocus:()=>{c(-1)},handleInputChange:e=>C(e.target.value)}):(0,t.jsxs)(t.Fragment,{children:[" ",(null==o?void 0:o.type)==="task"?(0,t.jsxs)("div",{className:"border relative  flex justify-between border-gray-600 group-hover:border group-hover:border-gray-700 my-2 w-full  p-3 rounded-md transition ease-in-out duration-200",children:[(0,t.jsx)("div",{children:o.text}),(0,t.jsx)("div",{className:"h-7 w-7 absolute -right-3 top-2.5  flex items-center justify-center rounded-full border bg-gray-700 group-hover:bg-gray-800 border-gray-500 transition ease-in-out duration-200",children:(0,t.jsx)(v,{})})]}):(0,t.jsx)("div",{className:" text-gray-300",children:k.length>0?k:o.text})]})})]})]}),(0,t.jsx)(N,{message:o,hover:b,reply:u,handleFocusInput:(e,s)=>{c(e),C(s.text)},handleOpenDeletePrompt:p})]})]},o.id)},L=e=>{let{messages:s,reply:r}=e,[i,a]=(0,l.useState)(-1),[d,c]=(0,l.useState)(!1),[x,h]=(0,l.useState)(null),{team:m,chatEndRef:g,chatStartRef:v,chatLoading:j,editTeamMessage:p,editGroupMessage:f,editDirectMessage:w,deleteTeamMessage:b,deleteGroupMessage:y,deleteDirectMessage:N,convertMessages:L,scrollToBottom:M}=(0,n.y2)(),z=(0,l.useRef)(null),A=e=>{c(!0),h(e)};return(0,l.useEffect)(()=>{-1!==i&&z.current.focus()},[i]),(0,l.useEffect)(()=>{M()},[null==s?void 0:s.length]),(0,t.jsx)(t.Fragment,{children:(null==s?void 0:s.length)!==0||j?(0,t.jsxs)("div",{className:"relative flex flex-col space-y-3 pt-2  h-screen overflow-y-scroll no-scrollbar pb-64",children:[(0,t.jsx)("div",{ref:v}),(0,t.jsx)(k,{deletePrompt:d,setDeletePrompt:c,messageToDelete:x}),j?(0,t.jsx)(u,{}):L(s||[]).map(e=>(0,t.jsx)(t.Fragment,{children:e[1].map(e=>(0,t.jsx)(C,{message:e,inputEl:i,setInputEl:a,inputRef:z,reply:r,handleOpenDeletePrompt:A}))})),(0,t.jsx)("div",{ref:g})]}):(0,t.jsx)(o,{chatName:"Name"})})}}}]);