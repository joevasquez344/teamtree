(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{48971:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teams/[teamId]/chat",function(){return l(52686)}])},45406:function(e,s,l){"use strict";var t=l(85893),r=l(11163),n=l(67294),a=l(55550),c=l(354);s.Z=e=>{let{children:s}=e,l=(0,r.useRouter)(),{authUser:i,authLayout:o,setAuthLayout:d}=(0,a.aC)(),{teams:u}=(0,c.y2)();return(0,n.useEffect)(()=>{let e=l.pathname;if(i||l.push("/"),i&&("/"===e||"/login"===e||"/register"===e)){if(u.length>0){l.push("/teams/".concat(u[0].id));return}l.push("/profile/".concat(i.username))}},[i]),(0,t.jsx)("div",{children:i?s:null})}},52686:function(e,s,l){"use strict";l.r(s);var t=l(85893),r=l(67294);l(45406);var n=l(55550),a=l(80040),c=l(69818),i=l(354),o=l(59335),d=l(50549),u=l(11163),m=l(4167);let x=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 ",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 012.25-2.25h7.5A2.25 2.25 0 0118 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 004.5 9v.878m13.5-3A2.25 2.25 0 0119.5 9v.878m0 0a2.246 2.246 0 00-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0121 12v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6c0-.98.626-1.813 1.5-2.122"})});s.default=()=>{let e=(0,u.useRouter)(),s=(0,r.useRef)(null),{setAuthLayout:l,authUser:h}=(0,n.aC)(),{teamMembers:g,teamChat:f,team:p,getTeam:v,teamLoading:b,addTeamMessage:j,addTeamReply:y,error:N,setError:w,builder:k,removeTeam:C,removeMemberFromState:_,teams:T}=(0,i.y2)(),[R,A]=(0,r.useState)(""),[E,S]=(0,r.useState)(!1),[Z,z]=(0,r.useState)(null),D=async e=>{if(e.preventDefault(),0===R.length)return;let s=E?"task":"message";j(s,R),A("")},M=async e=>{e.preventDefault(),0!==R.length&&(await y(Z,R),z(null),A(""))};return((0,r.useEffect)(()=>{w(!1),v(),l(!0)},[e.query.teamId]),console.log("Reply To: ",Z),N)?(0,t.jsx)("div",{className:"w-full h-screen flex justify-center mt-96",children:(0,t.jsx)("div",{className:"text-gray-300 text-3xl",children:N})}):(0,t.jsxs)("div",{className:"bg-gray-700",children:[(0,t.jsx)("div",{className:"h-12 w-full shadow-md px-5 flex items-center text-gray-200 text-lg font-semibold",children:b?(0,t.jsx)("div",{className:"w-full h-full p-1",children:(0,t.jsx)("div",{className:"h-8 w-64",children:(0,t.jsx)(d.Z,{className:"h-full w-full",baseColor:"rgb(31 41 55)",count:1,borderRadius:"4px",highlightColor:"rgb(55 65 81)",enableAnimation:!0,direction:"rtl",duration:1})})}):(0,t.jsxs)("div",{children:[p.name," Chat"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-12",children:[(0,t.jsxs)("div",{className:"col-span-10 overflow-y-scroll no-scrollbar h-screen relative",children:[(0,t.jsx)(a.Z,{messages:null==f?void 0:f.messages,reply:e=>{z(e),s.current.focus()}}),(0,t.jsx)("div",{className:"absolute bottom-24 w-full ".concat(null===Z?"pt-5":"pt-3","  pb-10  px-7 bg-gray-700 border-t border-t-gray-600 z-30 "),children:(0,t.jsxs)("div",{className:"h-full",children:[null!==Z&&(0,t.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,t.jsx)("div",{className:"text-gray-300",children:"Replying to"}),(0,t.jsxs)("div",{className:"text-green-500",children:[" ",Z.user.name]})]}),(0,t.jsxs)("form",{onSubmit:null===Z?D:M,className:"".concat(null!==Z&&"border border-green-500"," h-full flex items-center bg-gray-600"),children:[null===Z&&(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)(o.Tooltip,{placement:"bottom",content:E?"Remove Task Designation":"Assign as Task",animate:{mount:{scale:1,y:0},unmount:{scale:0,y:1}},className:"hidden sm:flex px-3 py-2 rounded-md text-xs text-gray-500 font-bold bg-transparent z-50",children:(0,t.jsx)("div",{onClick:()=>{S(!E)},className:"h-7 w-7 rounded-full ".concat(E?"bg-green-400 text-green-700":"border border-green-400 text-green-500 border-opacity-50","  flex justify-center items-center cursor-pointer"),children:(0,t.jsx)(x,{})})})}),(0,t.jsx)("input",{ref:s,value:R,onChange:e=>A(e.target.value),className:"w-full py-3 px-5 bg-gray-600  outline-none text-gray-400",type:"text",placeholder:null!==Z?"Reply to ".concat(Z.user.name):"Type ".concat(E?"Task":"Message")}),E&&(0,t.jsx)("div",{className:"mx-3 text-sm border border-green-500 text-green-500 px-5 rounded-sm",children:"Task"})]}),null!==Z&&(0,t.jsx)("div",{onClick:()=>z(null),className:"text-green-500 text-xs cursor-pointer mt-3",children:"Cancel"})]})})]}),(0,t.jsx)("div",{className:"border-l border-l-gray-600 h-screen col-span-2",children:(0,t.jsx)(c.Z,{team:p,type:"chat",removeMember:e=>{(0,m.zT)(e,p.id,h.id),_(e),e===h.id&&C(p.id)}})})]})]})}}},function(e){e.O(0,[40,774,888,179],function(){return e(e.s=48971)}),_N_E=e.O()}]);