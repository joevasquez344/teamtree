(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{20236:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teams/[teamId]/chat/[username]",function(){return r(22377)}])},45406:function(e,s,r){"use strict";var t=r(85893),l=r(11163),n=r(67294),a=r(55550),c=r(354);s.Z=e=>{let{children:s}=e,r=(0,l.useRouter)(),{authUser:i,authLayout:o,setAuthLayout:d}=(0,a.aC)(),{teams:u}=(0,c.y2)();return(0,n.useEffect)(()=>{let e=r.pathname;if(i||r.push("/"),i&&("/"===e||"/login"===e||"/register"===e)){if(u.length>0){r.push("/teams/".concat(u[0].id));return}r.push("/profile/".concat(i.username))}},[i]),(0,t.jsx)("div",{children:i?s:null})}},22377:function(e,s,r){"use strict";r.r(s);var t=r(85893),l=r(67294);r(45406);var n=r(55550),a=r(80040),c=r(69818),i=r(354),o=r(59335),d=r(50549),u=r(11163);let m=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 text-green-600",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 012.25-2.25h7.5A2.25 2.25 0 0118 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 004.5 9v.878m13.5-3A2.25 2.25 0 0119.5 9v.878m0 0a2.246 2.246 0 00-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0121 12v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6c0-.98.626-1.813 1.5-2.122"})});s.default=()=>{let e=(0,u.useRouter)(),s=(0,l.useRef)(null),{setAuthLayout:r}=(0,n.aC)(),{teamMembers:x,teamChat:h,team:g,getTeam:p,teamLoading:f,addTeamMessage:v,addDirectMessage:b,addDirectMessageReply:j,addTeamReply:y,error:N,setError:w,builder:k,getDirectChat:C,chatLoading:_,directMessages:T,directMessagesHistory:A}=(0,i.y2)(),[E,R]=(0,l.useState)(""),[S,Z]=(0,l.useState)(!1),[D,q]=(0,l.useState)(null);console.log("Team: ",g);let z=async e=>{if(e.preventDefault(),0===E.length)return;let s=S?"task":"direct message";b(s,E),R("")},H=async e=>{e.preventDefault(),0!==E.length&&(await j(D,E),q(null),R(""))};return((0,l.useEffect)(()=>{w(!1),C(),r(!0)},[e.query.username]),N)?(0,t.jsx)("div",{className:"w-full h-screen flex justify-center mt-96",children:(0,t.jsx)("div",{className:"text-gray-300 text-3xl",children:N})}):(0,t.jsxs)("div",{className:"bg-gray-700",children:[(0,t.jsx)("div",{className:"h-12 bg-gray-700  border-b border-b-gray-600 px-5 flex items-center text-gray-200 text-lg font-semibold",children:_?(0,t.jsx)(d.Z,{className:"h-6",baseColor:"rgb(31 41 55)",count:1,width:"200px",highlightColor:"rgb(55 65 81)",enableAnimation:!0,direction:"rtl",duration:1}):(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{children:"@"}),(0,t.jsx)("div",{children:e.query.username})," ",(0,t.jsx)("div",{children:"Chat"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-12",children:[(0,t.jsxs)("div",{className:"col-span-10 overflow-y-scroll no-scrollbar h-screen relative",children:[(0,t.jsx)(a.Z,{messages:T,reply:e=>{q(e),s.current.focus()},replyTo:D}),(0,t.jsx)("div",{className:"absolute bg-gray-700 bottom-24 w-full ".concat(null===D?"pt-5":"pt-3","  pb-10  px-7 border-t border-t-gray-600 z-30 "),children:(0,t.jsxs)("div",{className:"h-full",children:[null!==D&&(0,t.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,t.jsx)("div",{className:"text-gray-300",children:"Replying to"}),(0,t.jsxs)("div",{className:"text-green-500",children:[" ",D.user.name]})]}),(0,t.jsxs)("form",{onSubmit:null===D?z:H,className:"".concat(null!==D&&"border border-green-500"," h-full flex items-center bg-gray-600"),children:[null===D&&(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)(o.Tooltip,{placement:"bottom",content:S?"Remove Task Designation":"Assign as Task",animate:{mount:{scale:1,y:0},unmount:{scale:0,y:1}},className:"hidden sm:flex px-3 py-2 rounded-md text-xs text-green-500 font-bold bg-transparent z-50",children:(0,t.jsx)("div",{onClick:()=>{Z(!S)},className:"h-7 w-7 rounded-full ".concat(S?"bg-green-300":"border border-gray-500","  flex justify-center items-center cursor-pointer"),children:(0,t.jsx)(m,{})})})}),(0,t.jsx)("input",{ref:s,value:E,onChange:e=>R(e.target.value),className:"w-full py-3 px-5 bg-gray-600  outline-none text-gray-400",type:"text",placeholder:null!==D?"Reply to ".concat(D.user.name):"Type ".concat(S?"Task":"Message")}),S&&(0,t.jsx)("div",{className:"mx-3 text-sm border border-green-500 text-green-500 px-5 rounded-sm",children:"Task"})]}),null!==D&&(0,t.jsx)("div",{onClick:()=>{q(null)},className:"text-green-500 text-xs cursor-pointer mt-3",children:"Cancel"})]})})]}),(0,t.jsx)("div",{className:"border-l border-l-gray-600 h-screen col-span-2",children:(0,t.jsx)(c.Z,{members:x,type:"chat"})})]})]})}}},function(e){e.O(0,[40,774,888,179],function(){return e(e.s=20236)}),_N_E=e.O()}]);